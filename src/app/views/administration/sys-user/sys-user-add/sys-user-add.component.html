<div *ngIf="addVisible">
  <form action="Submit" (submit)="save($event)">
    <dx-button icon="fa fa-ban" text="Cancel" (onClick)="cancel()"></dx-button>
    <dx-button class="pull-right" icon="fa fa-save" text="Save" validationGroup="userData" [useSubmitBehavior]="true">
    </dx-button>
    <div class="m-2"></div>
    <p style="border-top: 1px rgb(196, 196, 196) solid; padding: 0px; margin: 0px;"></p>
    <div class="m-2"></div>
    <dx-form [(formData)]="user" validationGroup="userData">
      <dxi-item itemType="group" [colCount]="2">
        <dxi-item itemType="group">
          <dxi-item dataField="npeg">
            <dxo-label text="No. Pegawai"></dxo-label>
            <dxi-validation-rule type="required" message="No. Pegawai is required"></dxi-validation-rule>
          </dxi-item>
          <dxi-item dataField="nama">
            <dxo-label text="Nama"></dxo-label>
            <dxi-validation-rule type="required" message="Nama is required"></dxi-validation-rule>
          </dxi-item>
          <dxi-item dataField="password" editorType="dxTextBox" [editorOptions]="{ mode: 'password', disabled: isEdit }">
            <dxo-label text="Password"></dxo-label>
            <dxi-validation-rule type="required" message="Password is required"></dxi-validation-rule>
            <dxi-validation-rule type="pattern" pattern= "^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}$" message="Password must be at least 8 characters, must contain both uppercase letters (A-Z) and lowercase letters (a-z), and must contain a number (0-9)"></dxi-validation-rule>   
          </dxi-item>
          <dxi-item dataField="gelar">
            <dxo-label text="Gelar"></dxo-label>
          </dxi-item>
          <dxi-item dataField="pendidikan">
            <dxo-label text="Pendidikan"></dxo-label>
          </dxi-item>
          <dxi-item dataField="tgl_masuk" editorType="dxDateBox" [editorOptions]="{ value: null, width: '100%' }">
            <dxo-label text="Tanggal Masuk"></dxo-label>
            <dxi-validation-rule type="required" message="Tanggal Masuk is required"></dxi-validation-rule>
          </dxi-item>
          <dxi-item dataField="tgl_capeg" editorType="dxDateBox" [editorOptions]="{ value: null, width: '100%' }">
            <dxo-label text="Tanggal Capeg"></dxo-label>
            <dxi-validation-rule type="required" message="Tanggal Calon Pegawai is required"></dxi-validation-rule>
          </dxi-item>
          <dxi-item dataField="tgl_pegawai_tetap" editorType="dxDateBox" [editorOptions]="{ value: null, width: '100%' }">
            <dxo-label text="Tanggal Pegawai Tetap"></dxo-label>
            <dxi-validation-rule type="required" message="Tanggal Pegawai Tetap is required"></dxi-validation-rule>
          </dxi-item>
          
          <dxi-item dataField="jabatan_id" editorType="dxSelectBox" [editorOptions]="{items: daftarJabatan, value:'', displayExpr: 'position_title', valueExpr: 'idpos'}">            
            <dxo-label text="ID Jabatan"></dxo-label>
            <!--<dxi-validation-rule type="required" message="ID Jabatan is required"></dxi-validation-rule>-->
          </dxi-item>
          <dxi-item dataField="entitas_id" editorType="dxSelectBox" [editorOptions]="{items: roles, value:'', displayExpr: 'roleName', valueExpr: 'id'}">            
            <dxo-label text="ID Entitas"></dxo-label>
            <!--<dxi-validation-rule type="required" message="ID Entitas is required"></dxi-validation-rule>-->
          </dxi-item>
          <dxi-item dataField="alamat"><dxo-label text="Alamat"></dxo-label></dxi-item>
          <dxi-item dataField="kota"><dxo-label text="Kota/Kab."></dxo-label></dxi-item>
          <dxi-item dataField="kode_pos"><dxo-label text="Kode Pos"></dxo-label></dxi-item>
        </dxi-item>
        <dxi-item itemType="group">
          <dxi-item dataField="jenis_kelamin" editorType="dxSelectBox" [editorOptions]="{items: languages, value:'', displayExpr: 'language', valueExpr: 'id'}">
            <dxo-label text="Jenis Kelamin"></dxo-label>
          </dxi-item>
          <dxi-item dataField="email"><dxo-label text="Email"></dxo-label>            
              <dxi-validation-rule type="email" message="Email is invalid"></dxi-validation-rule>
          </dxi-item>
        <dxi-item itemType="group" [colCount]="2">
          <dxi-item dataField="photo_url" [template]="'photoTemplate'" >
            <dxo-label text="Photo"></dxo-label>
          </dxi-item>
        </dxi-item>
        <dxi-item dataField="status" editorType="dxCheckBox">
          <dxo-label text="Active"></dxo-label>
        </dxi-item>
        </dxi-item>
      </dxi-item>
      <div *dxTemplate="let data of 'photoTemplate'">
        <img src="" onError="this.src='/assets/img/default.png'" width="150px" height="150px" class="form-avatar" />
        <dx-file-uploader name="file" uploadMode="useButtons" uploadUrl="" selectButtonText="Upload Photo"
          labelText="">
        </dx-file-uploader>
      </div>
    </dx-form>
    <app-form-confirmation [isSave]="isSave" [isCancel]="isCancel" [confVisible]="confVisible" (onYesConf)="save()" (onHideConf)="onHideConf()"
      (onSaveConf)="onSaveConf()" (onCancelConf)="onCancelConf()"></app-form-confirmation>
  </form>
</div>
<div *ngIf="isShowInfo">
  <app-search-site [siteSearchVsb]="siteSearchVsb" (onHideSiteSearch)="onHideSiteSearch($event, $event2)"></app-search-site>
</div>
